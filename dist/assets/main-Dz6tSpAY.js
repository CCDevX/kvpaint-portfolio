(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const v="kv-theme",g="fa-moon",f="fa-sun",y=document.documentElement,l=document.querySelector(".theme-toggle"),i=document.querySelector("#theme-icon");function L(t){y.setAttribute("data-theme",t),t==="dark"?(i.classList.remove(f),i.classList.add(g)):(i.classList.remove(g),i.classList.add(f)),localStorage.setItem(v,t)}function T(){try{console.log("enter toggle fct");const o=y.getAttribute("data-theme")==="dark"?"light":"dark";L(o)}catch(t){console.log("toggle error : ",t)}}function b(){const t=localStorage.getItem(v),o=window.matchMedia("(prefers-color-scheme: dark)").matches;L(t||(o?"dark":"light")),l==null||l.addEventListener("click",T)}b();const u=(t,o={})=>{},m={home:{title:"Home",scripts:["pages/home/home.js"]},gallery:{title:"Galerie",scripts:["pages/gallery/gallery.js"]},about:{title:"A propos",scripts:["pages/about/about.js"]},contact:{title:"Contact",scripts:["pages/contact/contact.js"]}},d=document.querySelector("#page-content"),S=()=>{d.innerHTML='<div class="loading"><i class="fa-solid fa-spinner fa-spin"></i> Loading...</div>'},w=()=>{document.querySelectorAll("script[data-page-script]").forEach(t=>{t.remove()})},q=async t=>{const o=await fetch(`./pages/${t}/${t}.html`);if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return o.text()},A=async(t,o)=>{var c;const r=((c=o[t])==null?void 0:c.scripts)||[];return r.length===0?(console.log(`No scripts to load for page: ${t}`),"No scripts loaded"):Promise.all(r.map(e=>new Promise((n,s)=>{const a=document.createElement("script");a.src=e,a.type="module",a.async=!0,a.setAttribute("data-page-script",""),document.body.appendChild(a),a.onload=()=>{console.log(`Script loaded: ${e}`),n(e)},a.onerror=()=>{console.error(`Script failed to load: ${e}`),s(new Error(`Failed to load script: ${e}`))}})))},p=async(t,o,r,c={})=>{S(),w();try{const e=await q(t);d.innerHTML=e,await A(t,o),console.log(`Page ${t} fully loaded.`),typeof r=="function"&&r(t,c)}catch(e){console.error(`Could not load page "${t}":`,e),d.innerHTML=`
      <div class="error-container">
        <h1>Error loading page</h1>
        <button onclick="location.reload()">Reload</button>
      </div>`}},M="/assets/logo-FHyG_KEv.png";document.addEventListener("DOMContentLoaded",()=>{k(),p("home",m,u)});const O=document.querySelector("#menu-icon"),P=document.querySelector(".top-nav"),k=()=>{const t=document.querySelector("#logo");t.src=M;const o=document.querySelectorAll("nav.top-nav a");h(o);const r=document.querySelector(".mobile-menu");r.innerHTML=P.innerHTML;const c=r.querySelector(".button-container");c&&c.remove();const e=r.querySelectorAll("ul li a");h(e),e.forEach(n=>{n.addEventListener("click",s=>{s.preventDefault(),e.forEach(E=>E.classList.remove("active")),s.currentTarget.classList.add("active");const a=s.currentTarget.getAttribute("data-page");p(a,m,u)})}),O.addEventListener("click",()=>{r.classList.toggle("active")}),window.addEventListener("resize",()=>{window.innerWidth>768&&(console.log("enter resize"),r.classList.remove("active"))})},h=t=>{t.forEach(o=>{o.addEventListener("click",r=>{r.preventDefault(),t.forEach(e=>e.classList.remove("active")),r.currentTarget.classList.add("active");const c=r.currentTarget.getAttribute("data-page");console.log("page : ",c),p(c,m,u)})})};
