(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function c(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=c(e);fetch(e.href,r)}})();const v="kv-theme",g="fa-moon",f="fa-sun",y=document.documentElement,l=document.querySelector(".theme-toggle"),i=document.querySelector("#theme-icon");function L(t){y.setAttribute("data-theme",t),t==="dark"?(i.classList.remove(f),i.classList.add(g)):(i.classList.remove(g),i.classList.add(f)),localStorage.setItem(v,t)}function b(){try{console.log("enter toggle fct");const o=y.getAttribute("data-theme")==="dark"?"light":"dark";L(o)}catch(t){console.log("toggle error : ",t)}}function w(){const t=localStorage.getItem(v),o=window.matchMedia("(prefers-color-scheme: dark)").matches;L(t||(o?"dark":"light")),l==null||l.addEventListener("click",b)}w();const u=(t,o={})=>{},m={home:{title:"Home",scripts:["./pages/home/home.js"]},gallery:{title:"Galerie",scripts:["./pages/gallery/gallery.js"]},about:{title:"A propos",scripts:["./pages/about/about.js"]},contact:{title:"Contact",scripts:["./pages/contact/contact.js"]}},d=document.querySelector("#page-content"),S=()=>{d.innerHTML='<div class="loading"><i class="fa-solid fa-spinner fa-spin"></i> Loading...</div>'},q=()=>{document.querySelectorAll("script[data-page-script]").forEach(t=>{t.remove()})},A=async t=>{const o=await fetch(`./pages/${t}/${t}.html`);if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return o.text()},M=async(t,o)=>{var n;const c=((n=o[t])==null?void 0:n.scripts)||[];return c.length===0?(console.log(`No scripts to load for page: ${t}`),"No scripts loaded"):Promise.all(c.map(e=>new Promise((r,a)=>{const s=document.createElement("script");s.src=e,s.type="module",s.async=!0,s.setAttribute("data-page-script",""),document.body.appendChild(s),s.onload=()=>{console.log(`Script loaded: ${e}`),r(e)},s.onerror=()=>{console.error(`Script failed to load: ${e}`),a(new Error(`Failed to load script: ${e}`))}})))},p=async(t,o,c,n={})=>{S(),q();try{const e=await A(t);d.innerHTML=e,await M(t,o),console.log(`Page ${t} fully loaded.`),typeof c=="function"&&c(t,n)}catch(e){console.error(`Could not load page "${t}":`,e),d.innerHTML=`
      <div class="error-container">
        <h1>Error loading page</h1>
        <button onclick="location.reload()">Reload</button>
      </div>`}};document.addEventListener("DOMContentLoaded",()=>{k(),p("home",m,u)});const O=document.querySelector("#menu-icon"),P=document.querySelector(".top-nav"),k=()=>{const t=new URL(""+new URL("logo-FHyG_KEv.png",import.meta.url).href,import.meta.url).href,o=document.querySelector("#logo");o.src=t;const c=document.querySelectorAll("nav.top-nav a");h(c);const n=document.querySelector(".mobile-menu");n.innerHTML=P.innerHTML;const e=n.querySelector(".button-container");e&&e.remove();const r=n.querySelectorAll("ul li a");h(r),r.forEach(a=>{a.addEventListener("click",s=>{s.preventDefault(),r.forEach(T=>T.classList.remove("active")),s.currentTarget.classList.add("active");const E=s.currentTarget.getAttribute("data-page");p(E,m,u)})}),O.addEventListener("click",()=>{n.classList.toggle("active")}),window.addEventListener("resize",()=>{window.innerWidth>768&&(console.log("enter resize"),n.classList.remove("active"))})},h=t=>{t.forEach(o=>{o.addEventListener("click",c=>{c.preventDefault(),t.forEach(e=>e.classList.remove("active")),c.currentTarget.classList.add("active");const n=c.currentTarget.getAttribute("data-page");console.log("page : ",n),p(n,m,u)})})};
